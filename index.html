<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ù†Ø´Ø¦ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ V2</title>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #0f172a;
            overflow-x: hidden;
        }

        /* Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        .mesh-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -50;
            background: #0f172a;
            overflow: hidden;
        }

        .mesh-blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
            animation: float 20s infinite ease-in-out;
        }

        .blob-1 {
            top: -10%;
            left: -10%;
            width: 50vw;
            height: 50vw;
            background: radial-gradient(circle, #2ed06e 0%, transparent 70%);
        }

        .blob-2 {
            bottom: -20%;
            right: -20%;
            width: 60vw;
            height: 60vw;
            background: radial-gradient(circle, #0ea5e9 0%, transparent 70%);
            animation-delay: -5s;
        }

        .blob-3 {
            top: 40%;
            left: 30%;
            width: 40vw;
            height: 40vh;
            background: radial-gradient(circle, #6366f1 0%, transparent 70%);
            animation-delay: -10s;
        }

        @keyframes float {

            0%,
            100% {
                transform: translate(0, 0) rotate(0deg);
            }

            50% {
                transform: translate(30px, -50px) rotate(10deg);
            }
        }

        /* Glassmorphism */
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .input-glass {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .input-glass:focus {
            border-color: #2ed06e;
            box-shadow: 0 0 15px rgba(46, 208, 110, 0.2);
        }

        /* Export Container Logic */
        .export-container {
            width: 1080px;
            min-height: 1080px;
            height: auto;
            position: fixed;
            left: -9999px;
            top: 0;
            z-index: -1;
            display: flex;
            flex-direction: column;
            /* Fix for Arabic text in html2canvas */
            letter-spacing: normal !important;
            font-feature-settings: "liga" 1, "dlig" 1;
            direction: rtl;
        }
    </style>
</head>

<body class="text-white">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ®
        const getFormattedDate = () => {
            const d = new Date();
            const day = String(d.getDate()).padStart(2, '0');
            const month = String(d.getMonth() + 1).padStart(2, '0');
            const year = d.getFullYear();
            return `${day}.${month}.${year}`;
        };

        // ØªØ¹Ø±ÙŠÙ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ (Ù…Ø´ØªØ±Ùƒ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© ÙˆØ§Ù„ØªØµØ¯ÙŠØ±)
        const getThemeConfig = (theme) => {
            switch (theme) {
                case 'urgent': return {
                    primary: '#ef4444',
                    bgGradient: 'from-red-900/40 to-slate-900',
                    badge: 'Ø¹Ø§Ø¬Ù„',
                    iconSvg: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                };
                case 'economy': return {
                    primary: '#2ed06e',
                    bgGradient: 'from-green-900/40 to-slate-900',
                    badge: 'Ø§Ù‚ØªØµØ§Ø¯',
                    iconSvg: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>
                };
                case 'special': return {
                    primary: '#a855f7',
                    bgGradient: 'from-purple-900/40 to-slate-900',
                    badge: 'Ù…Ù…ÙŠØ²',
                    iconSvg: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                };
                case 'highlight': return {
                    primary: '#eab308',
                    bgGradient: 'from-yellow-900/40 to-slate-900',
                    badge: 'Ø¥Ø¶Ø§Ø¡Ø©',
                    iconSvg: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path></svg>
                };
                default: return {
                    primary: '#3b82f6',
                    bgGradient: 'from-blue-900/40 to-slate-900',
                    badge: 'Ø®Ø¨Ø± Ø¹Ø§Ù…',
                    iconSvg: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                };
            }
        };

        // Ù…ÙƒÙˆÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù„Ù„ØªØµØ¯ÙŠØ±
        const NewsCardExport = ({ id, data, theme, bgImage, bgOpacity, titleColor, customThemeColor, logoImage, logoSize, dateOpacity, badgeOpacity, telegramOpacity, newsBodyColor, platformNameColor, dateBgColor, dateTextColor, badgeBgColor, badgeTextColor, badgeText, titleFontSize, bodyFontSize }) => {
            const config = getThemeConfig(theme);
            const activePrimary = customThemeColor || config.primary;
            const dateStr = getFormattedDate();

            // Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ¯Ø±Ø¬ Ø§Ù„Ù„ÙˆÙ†ÙŠ ÙÙŠ Ø­Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ù„ÙˆÙ† Ù…Ø®ØµØµ
            // Ù†Ø­ØªØ§Ø¬ Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù‡ÙŠÙƒØ³ Ø¥Ù„Ù‰ RGB Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ linear-gradient
            // Ù‡Ù†Ø§ Ø³Ù†Ø³ØªØ®Ø¯Ù… Ø­ÙŠÙ„Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ù„ØªØ¯Ø±Ø¬
            const gradientStyle = customThemeColor
                ? { background: `linear-gradient(to bottom right, ${customThemeColor}66, #0f172a)` }
                : {};

            // ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ù…Ø®ØµØµØŒ Ù„Ø§ Ù†Ø³ØªØ®Ø¯Ù… ÙƒÙ„Ø§Ø³ Ø§Ù„ØªØ¯Ø±Ø¬ Ø§Ù„Ø£ØµÙ„ÙŠ
            const gradientClass = customThemeColor ? '' : config.bgGradient;

            return (
                <div id={id} className="export-container bg-[#0f172a] text-white font-['Cairo'] relative overflow-hidden">
                    {/* Background Effects */}
                    <div className={`absolute inset-0 bg-gradient-to-br ${gradientClass} opacity-80`} style={gradientStyle}></div>

                    {/* User Background Image */}
                    {bgImage && (
                        <div className="absolute inset-0 bg-cover bg-center grayscale shadow-inner mix-blend-overlay"
                            style={{
                                backgroundImage: `url(${bgImage})`,
                                opacity: bgOpacity,
                                filter: 'grayscale(100%) contrast(120%)' // ØªØ£Ø«ÙŠØ± Ù„Ø¬Ø¹Ù„ Ø§Ù„Ø®Ù„ÙÙŠØ© Ù…Ù†Ø³Ø¬Ù…Ø©
                            }}>
                        </div>
                    )}

                    <div className="absolute top-[-200px] left-[-200px] w-[800px] h-[800px] bg-white/5 rounded-full blur-[150px]"></div>
                    <div className="absolute bottom-[-100px] right-[-100px] w-[600px] h-[600px] rounded-full blur-[120px]" style={{ background: activePrimary, opacity: 0.2 }}></div>

                    {/* Texture */}
                    <div className="absolute inset-0 opacity-20" style={{ backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.1'/%3E%3C/svg%3E")` }}></div>

                    {/* Content Wrapper */}
                    <div className="relative z-10 p-16 flex flex-col h-full justify-between">

                        {/* Header */}
                        <div className="flex justify-between items-start mb-10">
                            <div className="flex items-center gap-4">
                                {logoImage ? (
                                    <img src={logoImage} style={{ width: `${logoSize}px`, height: `${logoSize}px` }} className="rounded-2xl object-cover shadow-2xl border-2 border-white/10" alt="Logo" />
                                ) : (
                                    <div className="w-20 h-20 rounded-2xl flex items-center justify-center text-4xl shadow-2xl border-2 border-white/10 backdrop-blur-md bg-white/5">
                                        <span style={{ color: activePrimary }}>24</span>
                                    </div>
                                )}
                                <div className="relative -top-4">
                                    <h1 className="text-4xl font-black tracking-wide" style={{ color: platformNameColor }}>{data.platformName}</h1>
                                </div>
                            </div>
                            <div className="backdrop-blur-md border border-white/10 px-8 py-3 rounded-full flex items-center justify-center"
                                style={{ backgroundColor: `${dateBgColor}${Math.round(dateOpacity * 255).toString(16).padStart(2, '0')}` }}>
                                <span className="text-3xl font-bold font-sans tracking-wider relative -top-4" style={{ color: dateTextColor }}>{dateStr}</span>
                            </div>
                        </div>

                        {/* Main Body */}
                        <div className="flex-1 flex flex-col justify-center my-10">
                            {/* Badge */}
                            <div className="self-start flex items-center gap-3 px-6 py-3 rounded-xl mb-8 border border-white/10 backdrop-blur-xl shadow-lg"
                                style={{ background: `${badgeBgColor || activePrimary}${Math.round(badgeOpacity * 255).toString(16).padStart(2, '0')}` }}>
                                <div className="text-white w-8 h-8 flex items-center justify-center bg-white/20 rounded-full">
                                    {config.iconSvg}
                                </div>
                                <span className="text-3xl font-bold relative -top-5" style={{ color: badgeTextColor || activePrimary }}>{badgeText || config.badge}</span>
                            </div>

                            {/* Title */}
                            <h2 className="font-black leading-tight mb-12 drop-shadow-lg" style={{ lineHeight: 1.3, color: titleColor, fontSize: `${titleFontSize}px` }}>
                                {data.title || "Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø±..."}
                            </h2>

                            <div className="w-32 h-2 rounded-full mb-10" style={{ background: activePrimary }}></div>

                            {/* Body Text */}
                            <p className="font-medium leading-loose text-justify opacity-90" dir="rtl" style={{ color: newsBodyColor, fontSize: `${bodyFontSize}px` }}>
                                {data.body || "Ù†Øµ Ø§Ù„Ø®Ø¨Ø±..."}
                            </p>
                        </div>

                        {/* Footer - Telegram */}
                        <div className="mt-auto pt-10 border-t border-white/10 flex justify-between items-center">
                            <div className="w-10"></div>
                            <div className="flex items-center gap-4 px-6 py-3 rounded-full border border-white/5"
                                style={{ backgroundColor: `rgba(255, 255, 255, ${telegramOpacity})` }}>
                                <div className="w-12 h-12 rounded-full bg-[#0088cc] text-white flex items-center justify-center">
                                    {/* Telegram Icon SVG */}
                                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21.198 2.433a2.242 2.242 0 0 0-1.022.215l-8.609 3.33c-2.068.8-4.133 1.598-5.724 2.21a405.15 405.15 0 0 1-2.849 1.09c-.42.147-.99.332-1.473.901-.728.968.193 1.798.919 2.286 1.61.516 3.275 1.009 4.654 1.472.509 1.793.997 3.592 1.48 5.388.16.69.506 1.014 1.152.718.523-.242 1.054-.504 1.585-.765a20.25 20.25 0 0 1 2.296-1.045l3.879 2.923c.896.657 1.832.327 2.115-.818.847-3.995 1.704-8.037 2.548-12.036a2.52 2.52 0 0 0-.951-2.868z"></path></svg>
                                </div>
                                <span className="text-2xl font-bold font-sans tracking-wide relative -top-3">{data.telegramLink || "t.me/Lairas24"}</span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [newsData, setNewsData] = useState({
                title: '',
                body: '',
                platformName: 'Ø§Ù„Ù„ÙŠØ±Ø© 24',
                telegramLink: 't.me/Lairas24'
            });
            const [theme, setTheme] = useState('general');
            const [badgeText, setBadgeText] = useState('Ø®Ø¨Ø± Ø¹Ø§Ù…');
            const [bgImage, setBgImage] = useState(null);
            const [bgOpacity, setBgOpacity] = useState(0.3);
            const [titleColor, setTitleColor] = useState('');
            const [customThemeColor, setCustomThemeColor] = useState(null);
            const [logoImage, setLogoImage] = useState(null);
            const [logoSize, setLogoSize] = useState(125); // Default size set to 125px
            const [dateOpacity, setDateOpacity] = useState(0.10);
            const [badgeOpacity, setBadgeOpacity] = useState(0.13);
            const [telegramOpacity, setTelegramOpacity] = useState(0.05);

            // New Color States
            const [newsBodyColor, setNewsBodyColor] = useState('#e5e7eb');
            const [platformNameColor, setPlatformNameColor] = useState('#ffffff');
            const [dateBgColor, setDateBgColor] = useState('#ffffff');
            const [dateTextColor, setDateTextColor] = useState('#ffffff');
            const [badgeBgColor, setBadgeBgColor] = useState(null);
            const [badgeTextColor, setBadgeTextColor] = useState(null);

            // Font Size States
            const [titleFontSize, setTitleFontSize] = useState(72);
            const [bodyFontSize, setBodyFontSize] = useState(36);

            const [loading, setLoading] = useState(false);

            // Ø§Ø³ØªØ®Ù„Ø§Øµ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ø¹Ø±Ø¶
            const currentThemeConfig = getThemeConfig(theme);
            const activePrimary = customThemeColor || currentThemeConfig.primary;
            const effectiveTitleColor = titleColor || activePrimary;

            const handleLogoUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setLogoImage(reader.result);
                    };
                    reader.readAsDataURL(file);
                }
            };

            const changeTheme = (newTheme) => {
                setTheme(newTheme);
                setCustomThemeColor(null);
                setBadgeText(getThemeConfig(newTheme).badge);
            };

            const handleImageUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setBgImage(reader.result);
                    };
                    reader.readAsDataURL(file);
                }
            };

            const handleDownload = async () => {
                const element = document.getElementById('export-card');
                if (!element) return;

                setLoading(true);
                // Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø·ÙˆØ·
                await document.fonts.ready;

                try {
                    await new Promise(resolve => setTimeout(resolve, 300)); // ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ·

                    const canvas = await html2canvas(element, {
                        scale: 2.5, // Ø¯Ù‚Ø© Ù…Ù…ØªØ§Ø²Ø© Ù…Ø¹ Ø­Ø¬Ù… Ù…Ù„Ù Ù…Ø¹Ù‚ÙˆÙ„
                        useCORS: true,
                        allowTaint: true,
                        backgroundColor: null,
                        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø®Ø§ØµØ© Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù†Øµ Ø§Ù„Ø¹Ø±Ø¨ÙŠ
                        onclone: (clonedDoc) => {
                            const clonedElement = clonedDoc.getElementById('export-card');
                            clonedElement.style.display = 'flex';
                            clonedElement.style.direction = 'rtl';
                            // Ø¥ØµÙ„Ø§Ø­ ØªÙ‚Ø·Ø¹ Ø§Ù„Ø£Ø­Ø±Ù Ø¹Ø¨Ø± Ø¥Ø¬Ø¨Ø§Ø± Ø®ØµØ§Ø¦Øµ Ø§Ù„Ø®Ø·
                            const allElements = clonedElement.querySelectorAll('*');
                            allElements.forEach(el => {
                                el.style.fontFamily = "'Cairo', sans-serif";
                                el.style.letterSpacing = '0px';
                            });
                        }
                    });

                    const link = document.createElement('a');
                    link.download = `News-${Date.now()}.png`;
                    link.href = canvas.toDataURL('image/png', 1.0);
                    link.click();
                } catch (err) {
                    console.error("Error generating image:", err);
                    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ØªÙ‚Ù†ÙŠØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
                }
                setLoading(false);
            };

            return (
                <div className="min-h-screen relative p-4 md:p-8 flex flex-col items-center">
                    {/* Background Animation */}
                    <div className="mesh-bg">
                        <div className="mesh-blob blob-1"></div>
                        <div className="mesh-blob blob-2"></div>
                        <div className="mesh-blob blob-3"></div>
                    </div>

                    {/* Header */}
                    <div className="relative z-10 text-center mb-10">
                        <h1 className="text-4xl md:text-5xl font-black mb-2 text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400">
                            ØµØ§Ù†Ø¹ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±
                        </h1>
                        <p className="text-gray-400 text-sm font-bold tracking-widest">Ù…Ø­Ø±Ø± Ù…ØªØ·ÙˆØ± Ù„ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„</p>
                    </div>

                    <div className="w-full max-w-6xl flex flex-col lg:flex-row gap-8 relative z-10">

                        {/* 1. Editor Section */}
                        <div className="flex-1 glass-panel rounded-[2rem] p-6 md:p-8 h-fit">
                            <div className="flex items-center gap-3 mb-6 pb-4 border-b border-gray-700">
                                <h2 className="text-xl font-bold">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø¨Ø±</h2>
                            </div>

                            {/* Theme Selector */}
                            <div className="mb-6">
                                <div className="flex justify-between items-end mb-2">
                                    <label className="block text-xs font-bold text-gray-400">Ù†ÙˆØ¹ Ø§Ù„Ù‚Ø§Ù„Ø¨</label>

                                    {/* Custom Theme Color Picker */}
                                    <div className="flex items-center gap-2 bg-slate-800 rounded-lg px-2 py-1 border border-slate-700">
                                        <span className="text-[10px] text-gray-400 font-bold">Ù„ÙˆÙ† Ø§Ù„Ù‚Ø§Ù„Ø¨</span>
                                        <input
                                            type="color"
                                            value={activePrimary}
                                            onChange={(e) => setCustomThemeColor(e.target.value)}
                                            className="w-6 h-6 rounded bg-transparent border-none cursor-pointer"
                                            title="ØªØ®ØµÙŠØµ Ù„ÙˆÙ† Ø§Ù„Ù‚Ø§Ù„Ø¨"
                                        />
                                        {customThemeColor && (
                                            <button onClick={() => setCustomThemeColor(null)} className="text-[10px] text-red-400 hover:text-red-300">Ø§Ø³ØªØ¹Ø§Ø¯Ø©</button>
                                        )}
                                    </div>
                                </div>

                                <div className="grid grid-cols-3 gap-2 mb-2">
                                    <button onClick={() => changeTheme('general')} className={`p-3 rounded-xl font-bold text-sm transition-all border ${theme === 'general' ? 'bg-blue-600 text-white border-blue-400' : 'bg-slate-800 border-slate-700 text-gray-400 hover:bg-slate-700'}`}>Ø¹Ø§Ù…</button>
                                    <button onClick={() => changeTheme('urgent')} className={`p-3 rounded-xl font-bold text-sm transition-all border ${theme === 'urgent' ? 'bg-red-600 text-white border-red-400' : 'bg-slate-800 border-slate-700 text-gray-400 hover:bg-slate-700'}`}>Ø¹Ø§Ø¬Ù„ ğŸš¨</button>
                                    <button onClick={() => changeTheme('economy')} className={`p-3 rounded-xl font-bold text-sm transition-all border ${theme === 'economy' ? 'bg-green-600 text-white border-green-400' : 'bg-slate-800 border-slate-700 text-gray-400 hover:bg-slate-700'}`}>Ø§Ù‚ØªØµØ§Ø¯ ğŸ“ˆ</button>
                                </div>
                                <div className="grid grid-cols-2 gap-2 mb-4">
                                    <button onClick={() => changeTheme('special')} className={`p-3 rounded-xl font-bold text-sm transition-all border ${theme === 'special' ? 'bg-purple-600 text-white border-purple-400' : 'bg-slate-800 border-slate-700 text-gray-400 hover:bg-slate-700'}`}>Ù…Ù…ÙŠØ² âœ¨</button>
                                    <button onClick={() => changeTheme('highlight')} className={`p-3 rounded-xl font-bold text-sm transition-all border ${theme === 'highlight' ? 'bg-yellow-600 text-white border-yellow-400' : 'bg-slate-800 border-slate-700 text-gray-400 hover:bg-slate-700'}`}>Ø¥Ø¶Ø§Ø¡Ø© ğŸ’¡</button>
                                </div>

                                {/* Custom Badge Text */}
                                <div>
                                    <label className="block text-xs font-bold text-gray-400 mb-2">Ù†Øµ Ø§Ù„Ø´Ø§Ø±Ø©</label>
                                    <input
                                        type="text"
                                        value={badgeText}
                                        onChange={(e) => setBadgeText(e.target.value)}
                                        placeholder="ØªØ®ØµÙŠØµ Ù†Øµ Ø§Ù„Ø´Ø§Ø±Ø©..."
                                        className="w-full input-glass rounded-xl p-3 text-sm font-bold text-white outline-none placeholder-gray-500"
                                    />
                                </div>
                            </div>

                            {/* Background Image Controls */}
                            <div className="mb-6 border-b border-gray-700 pb-6">
                                <label className="block text-xs font-bold text-gray-400 mb-2">ØµÙˆØ±Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©</label>
                                <div className="flex flex-col gap-3">
                                    <div className="relative">
                                        <input
                                            type="file"
                                            accept="image/*"
                                            onChange={handleImageUpload}
                                            className="hidden"
                                            id="bg-upload"
                                        />
                                        <label htmlFor="bg-upload" className="w-full flex items-center justify-center gap-2 p-3 rounded-xl bg-slate-800 border border-slate-700 text-gray-300 hover:bg-slate-700 cursor-pointer transition-all font-bold text-sm">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
                                            {bgImage ? 'ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø©' : 'Ø±ÙØ¹ ØµÙˆØ±Ø©'}
                                        </label>
                                    </div>

                                    {bgImage && (
                                        <div className="flex flex-col gap-2">
                                            <div className="flex justify-between text-xs font-bold text-gray-400">
                                                <span>Ø´ÙØ§ÙÙŠØ© Ø§Ù„Ø®Ù„ÙÙŠØ©</span>
                                                <span>{Math.round(bgOpacity * 100)}%</span>
                                            </div>
                                            <input
                                                type="range"
                                                min="0"
                                                max="1"
                                                step="0.05"
                                                value={bgOpacity}
                                                onChange={(e) => setBgOpacity(parseFloat(e.target.value))}
                                                className="w-full accent-blue-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                            />
                                            <button onClick={() => setBgImage(null)} className="text-xs text-red-400 font-bold self-end hover:text-red-300">Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙˆØ±Ø©</button>
                                        </div>
                                    )}
                                </div>
                            </div>

                            {/* Platform Name and Logo */}
                            <div className="mb-6">
                                <div className="flex justify-between items-end mb-2">
                                    <div className="flex items-center gap-2">
                                        <label className="block text-xs font-bold text-gray-400">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØµØ© ÙˆØ§Ù„Ø´Ø¹Ø§Ø±</label>
                                        <input
                                            type="color"
                                            value={platformNameColor}
                                            onChange={(e) => setPlatformNameColor(e.target.value)}
                                            className="w-4 h-4 rounded bg-transparent border-none cursor-pointer"
                                            title="Ù„ÙˆÙ† Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØµØ©"
                                        />
                                    </div>
                                    <div className="relative">
                                        <input
                                            type="file"
                                            accept="image/*"
                                            onChange={handleLogoUpload}
                                            className="hidden"
                                            id="logo-upload"
                                        />
                                        <label htmlFor="logo-upload" className="flex items-center gap-2 bg-slate-800 hover:bg-slate-700 px-3 py-1.5 rounded-lg cursor-pointer transition-all border border-slate-700">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-gray-400"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                                            <span className="text-[10px] text-gray-300 font-bold">{logoImage ? 'ØªØºÙŠÙŠØ± Ø§Ù„Ø´Ø¹Ø§Ø±' : 'Ø±ÙØ¹ Ø´Ø¹Ø§Ø±'}</span>
                                        </label>
                                    </div>
                                </div>
                                {logoImage && (
                                    <div className="mb-2 flex flex-col gap-2 bg-slate-800/50 p-3 rounded-xl border border-slate-700/50">
                                        <div className="flex justify-between text-xs font-bold text-gray-400">
                                            <span>Ø­Ø¬Ù… Ø§Ù„Ø´Ø¹Ø§Ø±</span>
                                            <span>{logoSize}px</span>
                                        </div>
                                        <input
                                            type="range"
                                            min="50"
                                            max="200"
                                            value={logoSize}
                                            onChange={(e) => setLogoSize(parseInt(e.target.value))}
                                            className="w-full accent-blue-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                        />
                                    </div>
                                )}
                                <input
                                    type="text"
                                    value={newsData.platformName}
                                    onChange={(e) => setNewsData({ ...newsData, platformName: e.target.value })}
                                    placeholder="Ø§Ù„Ù„ÙŠØ±Ø© 24"
                                    className="w-full input-glass rounded-xl p-4 text-lg font-bold text-white outline-none placeholder-gray-500"
                                />
                            </div>

                            {/* Telegram Link Input */}
                            <div className="mb-6">
                                <label className="block text-xs font-bold text-gray-400 mb-2">Ø±Ø§Ø¨Ø· ØªÙ„ØºØ±Ø§Ù…</label>
                                <input
                                    type="text"
                                    value={newsData.telegramLink}
                                    onChange={(e) => setNewsData({ ...newsData, telegramLink: e.target.value })}
                                    placeholder="t.me/Lairas24"
                                    className="w-full input-glass rounded-xl p-4 text-lg font-bold text-white outline-none placeholder-gray-500 font-sans"
                                    dir="ltr"
                                />
                            </div>

                            {/* Transparency and Colors Controls */}
                            <div className="mb-6 p-4 rounded-xl bg-slate-800/30 border border-white/5">
                                <h3 className="text-xs font-bold text-gray-400 mb-4">ØªØ®ØµÙŠØµ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø´ÙØ§ÙÙŠØ©</h3>

                                <div className="space-y-4">
                                    {/* Date Settings */}
                                    <div>
                                        <div className="flex justify-between items-center text-xs font-bold text-gray-400 mb-2">
                                            <span>Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ØªØ§Ø±ÙŠØ®</span>
                                            <div className="flex gap-2">
                                                <div className="flex items-center gap-1 bg-slate-800 px-2 py-1 rounded">
                                                    <span className="text-[10px]">Ø®Ù„ÙÙŠØ©</span>
                                                    <input type="color" value={dateBgColor} onChange={(e) => setDateBgColor(e.target.value)} className="w-4 h-4 rounded cursor-pointer" />
                                                </div>
                                                <div className="flex items-center gap-1 bg-slate-800 px-2 py-1 rounded">
                                                    <span className="text-[10px]">Ù†Øµ</span>
                                                    <input type="color" value={dateTextColor} onChange={(e) => setDateTextColor(e.target.value)} className="w-4 h-4 rounded cursor-pointer" />
                                                </div>
                                                <span>{Math.round(dateOpacity * 100)}%</span>
                                            </div>
                                        </div>
                                        <input
                                            type="range"
                                            min="0"
                                            max="1"
                                            step="0.05"
                                            value={dateOpacity}
                                            onChange={(e) => setDateOpacity(parseFloat(e.target.value))}
                                            className="w-full accent-blue-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                        />
                                    </div>

                                    {/* Badge Settings */}
                                    <div>
                                        <div className="flex justify-between items-center text-xs font-bold text-gray-400 mb-2">
                                            <span>Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù‚Ø§Ù„Ø¨ (Ø¹Ø§Ø¬Ù„..)</span>
                                            <div className="flex gap-2">
                                                <div className="flex items-center gap-1 bg-slate-800 px-2 py-1 rounded">
                                                    <span className="text-[10px]">Ø®Ù„ÙÙŠØ©</span>
                                                    <input type="color" value={badgeBgColor || activePrimary} onChange={(e) => setBadgeBgColor(e.target.value)} className="w-4 h-4 rounded cursor-pointer" />
                                                </div>
                                                <div className="flex items-center gap-1 bg-slate-800 px-2 py-1 rounded">
                                                    <span className="text-[10px]">Ù†Øµ</span>
                                                    <input type="color" value={badgeTextColor || activePrimary} onChange={(e) => setBadgeTextColor(e.target.value)} className="w-4 h-4 rounded cursor-pointer" />
                                                </div>
                                                {/* Reset Button if customized */}
                                                {(badgeBgColor || badgeTextColor) && (
                                                    <button onClick={() => { setBadgeBgColor(null); setBadgeTextColor(null); }} className="text-[10px] text-red-400">Ø§Ø³ØªØ¹Ø§Ø¯Ø©</button>
                                                )}
                                                <span>{Math.round(badgeOpacity * 100)}%</span>
                                            </div>
                                        </div>
                                        <input
                                            type="range"
                                            min="0"
                                            max="1"
                                            step="0.05"
                                            value={badgeOpacity}
                                            onChange={(e) => setBadgeOpacity(parseFloat(e.target.value))}
                                            className="w-full accent-blue-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                        />
                                    </div>

                                    {/* Telegram Opacity */}
                                    <div>
                                        <div className="flex justify-between text-xs font-bold text-gray-400 mb-1">
                                            <span>Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªÙŠÙ„ØºØ±Ø§Ù…</span>
                                            <span>{Math.round(telegramOpacity * 100)}%</span>
                                        </div>
                                        <input
                                            type="range"
                                            min="0"
                                            max="1"
                                            step="0.05"
                                            value={telegramOpacity}
                                            onChange={(e) => setTelegramOpacity(parseFloat(e.target.value))}
                                            className="w-full accent-blue-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                        />
                                    </div>
                                </div>
                            </div>

                            {/* Title Input */}
                            <div className="mb-6">
                                <div className="flex justify-between items-end mb-2">
                                    <label className="block text-xs font-bold text-gray-400">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
                                    <div className="flex items-center gap-2 bg-slate-800 rounded-lg px-2 py-1 border border-slate-700">
                                        <span className="text-[10px] text-gray-400 font-bold">Ø­Ø¬Ù… Ø§Ù„Ø®Ø·</span>
                                        <input
                                            type="number"
                                            min="20"
                                            max="150"
                                            value={titleFontSize}
                                            onChange={(e) => setTitleFontSize(parseInt(e.target.value))}
                                            className="w-10 bg-transparent text-white text-[10px] font-bold outline-none text-center"
                                        />
                                    </div>
                                    <div className="flex items-center gap-2 bg-slate-800 rounded-lg px-2 py-1 border border-slate-700">
                                        <span className="text-[10px] text-gray-400 font-bold">Ù„ÙˆÙ† Ø§Ù„Ø®Ø·</span>
                                        <input
                                            type="color"
                                            value={effectiveTitleColor}
                                            onChange={(e) => setTitleColor(e.target.value)}
                                            className="w-6 h-6 rounded bg-transparent border-none cursor-pointer"
                                            title="Ø§Ø®ØªØ± Ù„ÙˆÙ† Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"
                                        />
                                        {titleColor && (
                                            <button onClick={() => setTitleColor('')} className="text-[10px] text-red-400 hover:text-red-300">Ø§Ø³ØªØ¹Ø§Ø¯Ø©</button>
                                        )}
                                    </div>
                                </div>
                                <input
                                    type="text"
                                    value={newsData.title}
                                    onChange={(e) => setNewsData({ ...newsData, title: e.target.value })}
                                    placeholder="Ù…Ø«Ø§Ù„: Ø§Ø±ØªÙØ§Ø¹ Ù…ÙØ§Ø¬Ø¦ ÙÙŠ Ø§Ù„Ø£Ø³ÙˆØ§Ù‚..."
                                    className="w-full input-glass rounded-xl p-4 text-lg font-bold text-white outline-none placeholder-gray-500"
                                />
                            </div>

                            {/* Body Input */}
                            <div className="mb-8">
                                <div className="flex justify-between items-end mb-2">
                                    <label className="block text-xs font-bold text-gray-400">Ù†Øµ Ø§Ù„Ø®Ø¨Ø±</label>
                                    <div className="flex items-center gap-2 bg-slate-800 rounded-lg px-2 py-1 border border-slate-700">
                                        <span className="text-[10px] text-gray-400 font-bold">Ø­Ø¬Ù… Ø§Ù„Ø®Ø·</span>
                                        <input
                                            type="number"
                                            min="10"
                                            max="100"
                                            value={bodyFontSize}
                                            onChange={(e) => setBodyFontSize(parseInt(e.target.value))}
                                            className="w-10 bg-transparent text-white text-[10px] font-bold outline-none text-center"
                                        />
                                    </div>
                                    <div className="flex items-center gap-2 bg-slate-800 rounded-lg px-2 py-1 border border-slate-700">
                                        <span className="text-[10px] text-gray-400 font-bold">Ù„ÙˆÙ† Ø§Ù„Ù†Øµ</span>
                                        <input
                                            type="color"
                                            value={newsBodyColor}
                                            onChange={(e) => setNewsBodyColor(e.target.value)}
                                            className="w-4 h-4 rounded bg-transparent border-none cursor-pointer"
                                            title="Ù„ÙˆÙ† Ù†Øµ Ø§Ù„Ø®Ø¨Ø±"
                                        />
                                    </div>
                                </div>
                                <textarea
                                    value={newsData.body}
                                    onChange={(e) => setNewsData({ ...newsData, body: e.target.value })}
                                    placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ù‡Ù†Ø§..."
                                    className="w-full input-glass rounded-xl p-4 text-base leading-relaxed text-gray-200 outline-none h-40 resize-none placeholder-gray-500"
                                ></textarea>
                            </div>

                            {/* Action Button */}
                            <button
                                onClick={handleDownload}
                                disabled={loading || !newsData.title}
                                className="w-full py-4 rounded-xl font-black text-lg flex items-center justify-center gap-2 transition-all transform active:scale-95 shadow-lg text-white"
                                style={{ background: `linear-gradient(to right, ${activePrimary}, ${activePrimary}dd)` }}
                            >
                                {loading ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...' : 'ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© (HD)'}
                            </button>
                        </div>

                        {/* 2. Live Preview Section (Smaller Scale) */}
                        <div className="flex-1 flex flex-col gap-4">
                            <div className="glass-panel rounded-2xl p-4 mb-2 flex items-center justify-between">
                                <span className="font-bold text-sm text-gray-300">Ù…Ø¹Ø§ÙŠÙ†Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ©</span>
                            </div>

                            <div className="relative w-full aspect-square rounded-[2rem] overflow-hidden border border-white/10 shadow-2xl bg-[#0f172a] group">
                                <div className={`absolute inset-0 bg-gradient-to-br opacity-80 transition-colors duration-500 ${!customThemeColor ? currentThemeConfig.bgGradient : ''}`}
                                    style={customThemeColor ? { background: `linear-gradient(to bottom right, ${customThemeColor}66, #0f172a)` } : {}}></div>

                                {bgImage && (
                                    <div className="absolute inset-0 bg-cover bg-center grayscale mix-blend-overlay"
                                        style={{
                                            backgroundImage: `url(${bgImage})`,
                                            opacity: bgOpacity,
                                            filter: 'grayscale(100%) contrast(120%)'
                                        }}>
                                    </div>
                                )}

                                <div className="relative z-10 p-8 flex flex-col h-full overflow-y-auto">
                                    <div className="flex justify-between items-start mb-4">
                                        {logoImage ? (
                                            <img src={logoImage} style={{ width: `${logoSize * 0.5}px`, height: `${logoSize * 0.5}px` }} className="rounded-lg object-cover shadow-md border border-white/10" alt="Logo" />
                                        ) : (
                                            <div className="w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center font-bold">24</div>
                                        )}
                                        <div className="text-[10px] px-2 py-1 rounded-full font-sans" style={{ backgroundColor: `${dateBgColor}${Math.round(dateOpacity * 255).toString(16).padStart(2, '0')}`, color: dateTextColor }}>{getFormattedDate()}</div>
                                    </div>

                                    <div className="flex-1 flex flex-col justify-center">
                                        <span className="text-xs font-bold mb-2" style={{ color: badgeTextColor || activePrimary }}>
                                            {badgeText || currentThemeConfig.badge}
                                        </span>
                                        <h3 className="font-black mb-4 leading-tight" style={{ color: effectiveTitleColor, fontSize: `${titleFontSize * 0.35}px` }}>
                                            {newsData.title || "Ø§Ù„Ø¹Ù†ÙˆØ§Ù†..."}
                                        </h3>
                                        <p className="leading-relaxed text-justify opacity-80" style={{ color: newsBodyColor, fontSize: `${bodyFontSize * 0.35}px` }}>
                                            {newsData.body || "Ø§Ù„Ù†Øµ..."}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {/* 3. Hidden Export Card */}
                    <NewsCardExport
                        id="export-card"
                        data={newsData}
                        theme={theme}
                        bgImage={bgImage}
                        bgOpacity={bgOpacity}
                        titleColor={effectiveTitleColor}
                        customThemeColor={customThemeColor}
                        logoImage={logoImage}
                        logoSize={logoSize}
                        dateOpacity={dateOpacity}
                        badgeOpacity={badgeOpacity}
                        telegramOpacity={telegramOpacity}
                        newsBodyColor={newsBodyColor}
                        platformNameColor={platformNameColor}
                        dateBgColor={dateBgColor}
                        dateTextColor={dateTextColor}
                        badgeBgColor={badgeBgColor}
                        badgeTextColor={badgeTextColor}
                        badgeText={badgeText}
                        titleFontSize={titleFontSize}
                        bodyFontSize={bodyFontSize}
                    />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>

<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ŸÖŸÜÿ¥ÿ¶ ÿßŸÑÿ£ÿÆÿ®ÿßÿ± ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸä V2</title>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #0f172a;
            overflow-x: hidden;
        }

        /* ÿßŸÑÿÆŸÑŸÅŸäÿ© ÿßŸÑŸÖÿ™ÿ≠ÿ±ŸÉÿ© */
        .mesh-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -50;
            background: #0f172a;
            overflow: hidden;
        }

        .mesh-blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
            animation: float 20s infinite ease-in-out;
        }

        .blob-1 {
            top: -10%;
            left: -10%;
            width: 50vw;
            height: 50vw;
            background: radial-gradient(circle, #2ed06e 0%, transparent 70%);
        }

        .blob-2 {
            bottom: -20%;
            right: -20%;
            width: 60vw;
            height: 60vw;
            background: radial-gradient(circle, #0ea5e9 0%, transparent 70%);
            animation-delay: -5s;
        }

        .blob-3 {
            top: 40%;
            left: 30%;
            width: 40vw;
            height: 40vh;
            background: radial-gradient(circle, #6366f1 0%, transparent 70%);
            animation-delay: -10s;
        }

        @keyframes float {

            0%,
            100% {
                transform: translate(0, 0) rotate(0deg);
            }

            50% {
                transform: translate(30px, -50px) rotate(10deg);
            }
        }

        /* Glassmorphism */
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .input-glass {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .input-glass:focus {
            border-color: #2ed06e;
            box-shadow: 0 0 15px rgba(46, 208, 110, 0.2);
        }

        /* Export Container Logic */
        .export-container {
            width: 1080px;
            min-height: 1080px;
            height: auto;
            position: fixed;
            left: -9999px;
            top: 0;
            z-index: -1;
            display: flex;
            flex-direction: column;
            /* Fix for Arabic text in html2canvas */
            letter-spacing: normal !important;
            font-feature-settings: "liga" 1, "dlig" 1;
            direction: rtl;
        }
    </style>
</head>

<body class="text-white">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ÿØÿßŸÑÿ© ŸÖÿ≥ÿßÿπÿØÿ© ŸÑÿ™ŸÜÿ≥ŸäŸÇ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ
        const getFormattedDate = () => {
            const d = new Date();
            const day = String(d.getDate()).padStart(2, '0');
            const month = String(d.getMonth() + 1).padStart(2, '0');
            const year = d.getFullYear();
            return `${day}.${month}.${year}`;
        };

        // ÿ™ÿπÿ±ŸäŸÅ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÇŸàÿßŸÑÿ® (ŸÖÿ¥ÿ™ÿ±ŸÉ ÿ®ŸäŸÜ ÿßŸÑŸÖÿπÿßŸäŸÜÿ© ŸàÿßŸÑÿ™ÿµÿØŸäÿ±)
        const getThemeConfig = (theme) => {
            switch (theme) {
                case 'urgent': return {
                    primary: '#ef4444',
                    bgGradient: 'from-red-900/40 to-slate-900',
                    badge: 'ÿπÿßÿ¨ŸÑ',
                    iconSvg: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                };
                case 'economy': return {
                    primary: '#2ed06e',
                    bgGradient: 'from-green-900/40 to-slate-900',
                    badge: 'ÿßŸÇÿ™ÿµÿßÿØ',
                    iconSvg: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>
                };
                case 'special': return {
                    primary: '#a855f7',
                    bgGradient: 'from-purple-900/40 to-slate-900',
                    badge: 'ŸÖŸÖŸäÿ≤',
                    iconSvg: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                };
                case 'highlight': return {
                    primary: '#eab308',
                    bgGradient: 'from-yellow-900/40 to-slate-900',
                    badge: 'ÿ•ÿ∂ÿßÿ°ÿ©',
                    iconSvg: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path></svg>
                };
                default: return {
                    primary: '#3b82f6',
                    bgGradient: 'from-blue-900/40 to-slate-900',
                    badge: 'ÿÆÿ®ÿ± ÿπÿßŸÖ',
                    iconSvg: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                };
            }
        };

        const designTemplates = [
            { id: 'default', name: 'ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä', type: 'classic', style: { background: '#0f172a' } },
            { id: 'modern_center', name: 'ŸÖŸàÿØÿ±ŸÜ ŸÖÿ±ŸÉÿ≤Ÿä', type: 'modern', style: { backgroundImage: 'radial-gradient(circle at center, #1e293b, #0f172a)' } },
            { id: 'bold_impact', name: 'ÿπÿ±Ÿäÿ∂ Ÿàÿ¨ÿ±Ÿäÿ°', type: 'bold', style: { backgroundImage: 'linear-gradient(135deg, #000000 0%, #1e1b4b 100%)' } },
            { id: 'elegant_side', name: 'ÿ£ŸÜŸäŸÇ ÿ¨ÿßŸÜÿ®Ÿä', type: 'side', style: { background: '#111827' } },

            // Variations with backgrounds but using the classic layout by default if not specified
            { id: 'midnight', name: 'ŸÑŸäŸÑŸä ÿπŸÖŸäŸÇ', type: 'classic', style: { backgroundImage: 'linear-gradient(to bottom right, #172554, #0f172a, #000000)' } },
            { id: 'royal', name: 'ŸÖŸÑŸÉŸä', type: 'classic', style: { backgroundImage: 'linear-gradient(135deg, #2e1065 0%, #0f172a 100%)' } },
            { id: 'galaxy', name: 'ŸÖÿ¨ÿ±ÿ©', type: 'modern', style: { backgroundImage: 'linear-gradient(to right, #24243e, #302b63, #0f172a)' } },
            { id: 'gold', name: 'ŸÅÿÆÿßŸÖÿ© ÿ∞Ÿáÿ®Ÿäÿ©', type: 'bold', style: { backgroundImage: 'linear-gradient(to bottom right, #422006, #713f12, #0f172a)' } },
        ];

        // ŸÖŸÉŸàŸÜ ÿßŸÑÿ®ÿ∑ÿßŸÇÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© ŸÑŸÑÿ™ÿµÿØŸäÿ±
        const NewsCardExport = ({ id, data, theme, bgPattern, bgImage, bgOpacity, titleColor, customThemeColor, logoImage, logoSize, dateOpacity, badgeOpacity, websiteOpacity, newsBodyColor, platformNameColor, dateBgColor, dateTextColor, badgeBgColor, badgeTextColor, badgeText, titleFontSize, bodyFontSize }) => {
            const config = getThemeConfig(theme);
            const activePrimary = customThemeColor || config.primary;
            const dateStr = getFormattedDate();

            const activeTemplate = designTemplates.find(p => p.id === bgPattern) || designTemplates[0];
            const layoutType = activeTemplate.type;

            const gradientStyle = customThemeColor
                ? { background: `linear-gradient(to bottom right, ${customThemeColor}66, #0f172a)` }
                : {};
            const gradientClass = customThemeColor ? '' : config.bgGradient;

            // Common Background Elements
            const BackgroundLayer = () => (
                <>
                    <div className={`absolute inset-0 bg-gradient-to-br ${gradientClass} opacity-80`} style={gradientStyle}></div>
                    {bgImage && (
                        <div className="absolute inset-0 bg-cover bg-center grayscale shadow-inner mix-blend-overlay"
                            style={{ backgroundImage: `url(${bgImage})`, opacity: bgOpacity, filter: 'grayscale(100%) contrast(120%)' }}></div>
                    )}
                    <div className="absolute inset-0 opacity-20" style={{ backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.1'/%3E%3C/svg%3E")` }}></div>
                </>
            );

            // 1. Classic Layout (The original one)
            if (layoutType === 'classic') {
                return (
                    <div id={id} className="export-container text-white font-['Cairo'] relative overflow-hidden" style={{ ...activeTemplate.style }}>
                        <BackgroundLayer />
                        <div className="absolute top-[-200px] left-[-200px] w-[800px] h-[800px] bg-white/5 rounded-full blur-[150px]"></div>
                        <div className="absolute bottom-[-100px] right-[-100px] w-[600px] h-[600px] rounded-full blur-[120px]" style={{ background: activePrimary, opacity: 0.2 }}></div>

                        <div className="relative z-10 p-16 flex flex-col h-full justify-between">
                            <div className="flex justify-between items-start mb-10">
                                <div className="flex items-center gap-4">
                                    {logoImage ? (
                                        <img src={logoImage} style={{ width: `${logoSize}px`, height: `${logoSize}px` }} className="rounded-2xl object-cover shadow-2xl border-2 border-white/10" alt="Logo" />
                                    ) : (
                                        <div className="w-20 h-20 rounded-2xl flex items-center justify-center text-4xl shadow-2xl border-2 border-white/10 backdrop-blur-md bg-white/5">
                                            <span style={{ color: activePrimary }}>24</span>
                                        </div>
                                    )}
                                    <div className="relative -top-4">
                                        <h1 className="text-4xl font-black tracking-wide" style={{ color: platformNameColor }}>{data.platformName}</h1>
                                    </div>
                                </div>
                                <div className="backdrop-blur-md border border-white/10 px-8 py-3 rounded-full flex items-center justify-center"
                                    style={{ backgroundColor: `${dateBgColor}${Math.round(dateOpacity * 255).toString(16).padStart(2, '0')}` }}>
                                    <span className="text-3xl font-bold font-sans tracking-wider relative -top-4" style={{ color: dateTextColor }}>{dateStr}</span>
                                </div>
                            </div>

                            <div className="flex-1 flex flex-col justify-center my-10">
                                <div className="self-start flex items-center gap-3 px-6 py-3 rounded-xl mb-8 border border-white/10 backdrop-blur-xl shadow-lg"
                                    style={{ background: `${badgeBgColor || activePrimary}${Math.round(badgeOpacity * 255).toString(16).padStart(2, '0')}` }}>
                                    <div className="text-white w-8 h-8 flex items-center justify-center bg-white/20 rounded-full">{config.iconSvg}</div>
                                    <span className="text-3xl font-bold relative -top-5" style={{ color: badgeTextColor || activePrimary }}>{badgeText || config.badge}</span>
                                </div>
                                <h2 className="font-black leading-tight mb-12 drop-shadow-lg" style={{ lineHeight: 1.3, color: titleColor, fontSize: `${titleFontSize}px` }}>
                                    {data.title || "ÿπŸÜŸàÿßŸÜ ÿßŸÑÿÆÿ®ÿ±..."}
                                </h2>
                                <div className="w-32 h-2 rounded-full mb-10" style={{ background: activePrimary }}></div>
                                <p className="font-medium leading-loose text-justify opacity-90" dir="rtl" style={{ color: newsBodyColor, fontSize: `${bodyFontSize}px` }}>
                                    {data.body || "ŸÜÿµ ÿßŸÑÿÆÿ®ÿ±..."}
                                </p>
                            </div>

                            <div className="mt-auto pt-10 border-t border-white/10 flex justify-between items-center">
                                <div className="w-10"></div>
                                <div className="flex items-center gap-4 px-6 py-3 rounded-full border border-white/5"
                                    style={{ backgroundColor: `rgba(255, 255, 255, ${websiteOpacity})` }}>
                                    <div className="w-12 h-12 rounded-full bg-[#3b82f6] text-white flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
                                    </div>
                                    <span className="text-2xl font-bold font-sans tracking-wide relative -top-3">{data.websiteLink || "www.lairanews.com"}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // 2. Modern Center Layout
            if (layoutType === 'modern') {
                return (
                    <div id={id} className="export-container text-white font-['Cairo'] relative overflow-hidden flex items-center justify-center text-center" style={{ ...activeTemplate.style }}>
                        <BackgroundLayer />
                        <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-black/40"></div>

                        <div className="relative z-10 w-full px-20 flex flex-col items-center h-full py-20">
                            {/* Top Logo Area */}
                            <div className="flex flex-col items-center mb-16">
                                {logoImage ? (
                                    <img src={logoImage} style={{ width: `${logoSize}px`, height: `${logoSize}px` }} className="rounded-full shadow-2xl border-4 border-white/20 mb-6" alt="Logo" />
                                ) : (
                                    <div className="w-24 h-24 rounded-full flex items-center justify-center text-4xl shadow-2xl border-4 border-white/10 bg-white/10 mb-6">
                                        <span style={{ color: activePrimary }}>24</span>
                                    </div>
                                )}
                                <h1 className="text-3xl font-bold tracking-widest uppercase opacity-80" style={{ color: platformNameColor }}>{data.platformName}</h1>
                                <div className="mt-2 text-xl font-sans opacity-60 flex items-center gap-2">
                                    <span style={{ color: dateTextColor }}>{dateStr}</span>
                                    <span className="w-1 h-1 rounded-full bg-white/50"></span>
                                    <span style={{ color: badgeTextColor || activePrimary }}>{badgeText || config.badge}</span>
                                </div>
                            </div>

                            {/* Center Content */}
                            <div className="flex-1 flex flex-col justify-center items-center w-full max-w-4xl">
                                <h2 className="font-black leading-tight mb-12 drop-shadow-2xl text-center" style={{ lineHeight: 1.2, color: titleColor, fontSize: `${titleFontSize * 1.2}px` }}>
                                    {data.title || "ÿπŸÜŸàÿßŸÜ ÿßŸÑÿÆÿ®ÿ± ÿßŸÑŸÉÿ®Ÿäÿ±"}
                                </h2>

                                <div className="w-24 h-1 rounded-full mb-10" style={{ background: activePrimary }}></div>

                                <p className="font-medium leading-loose text-center opacity-90 text-xl max-w-3xl" dir="rtl" style={{ color: newsBodyColor, fontSize: `${bodyFontSize}px` }}>
                                    {data.body || "ŸÜÿµ ÿßŸÑÿÆÿ®ÿ± Ÿäÿ∏Ÿáÿ± ŸáŸÜÿß ÿ®ÿ¥ŸÉŸÑ ŸÖÿ±ŸÉÿ≤Ÿä ŸàŸàÿßÿ∂ÿ≠..."}
                                </p>
                            </div>

                            {/* Bottom Footer */}
                            <div className="mt-auto pt-10 flex items-center gap-3 opacity-80 hover:opacity-100 transition-opacity">
                                <div className="w-10 h-10 rounded-full bg-[#3b82f6] flex items-center justify-center text-white">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
                                </div>
                                <span className="text-2xl font-bold font-sans tracking-wide relative -top-3">{data.websiteLink}</span>
                            </div>
                        </div>
                    </div>
                );
            }

            // 3. Bold Impact Layout
            if (layoutType === 'bold') {
                return (
                    <div id={id} className="export-container text-white font-['Cairo'] relative overflow-hidden" style={{ ...activeTemplate.style }}>
                        <BackgroundLayer />
                        {/* Dramatic Lighting */}
                        <div className="absolute top-0 right-0 w-full h-[600px] bg-gradient-to-b from-black/80 to-transparent z-0"></div>
                        <div className="absolute bottom-0 left-0 w-full h-[600px] bg-gradient-to-t from-black/90 to-transparent z-0"></div>

                        {/* Giant Stroke/Bar */}
                        <div className="absolute left-0 top-0 bottom-0 w-8 z-20" style={{ background: activePrimary }}></div>

                        <div className="relative z-10 p-20 flex flex-col h-full justify-between pl-24">
                            {/* Top Header */}
                            <div className="flex justify-between items-center w-full border-b border-white/10 pb-8 mb-10">
                                <div className="flex items-center gap-6">
                                    <div className="bg-white/10 p-3 rounded-lg">
                                        {logoImage ? <img src={logoImage} className="w-16 h-16 object-cover rounded" /> : <div className="w-16 h-16 bg-white/20 rounded"></div>}
                                    </div>
                                    <h1 className="text-5xl font-black uppercase tracking-tighter" style={{ color: platformNameColor }}>{data.platformName}</h1>
                                </div>
                                <div className="text-right">
                                    <div className="text-3xl font-black font-sans" style={{ color: dateTextColor }}>{dateStr}</div>
                                    <div className="text-xl font-bold opacity-60" style={{ color: badgeTextColor || activePrimary }}>{badgeText || config.badge}</div>
                                </div>
                            </div>

                            {/* Content */}
                            <div className="flex-1 flex flex-col justify-center">
                                <h2 className="font-black mb-10 drop-shadow-lg" style={{ lineHeight: 1.1, color: titleColor, fontSize: `${titleFontSize * 1.3}px` }}>
                                    {data.title || "ÿπŸÜŸàÿßŸÜ ÿ∂ÿÆŸÖ"}
                                </h2>
                                <div className="p-8 bg-black/40 border-r-4 border-white/20 backdrop-blur-sm rounded-l-2xl">
                                    <p className="font-bold leading-loose text-justify text-2xl" dir="rtl" style={{ color: newsBodyColor, fontSize: `${bodyFontSize}px` }}>
                                        {data.body || "ŸÜÿµ ÿßŸÑÿÆÿ®ÿ±..."}
                                    </p>
                                </div>
                            </div>

                            {/* Footer */}
                            <div className="mt-12 flex justify-end">
                                <div className="flex items-center gap-4 bg-white text-black px-8 py-4 rounded-full shadow-2xl">
                                    <span className="text-2xl font-black font-sans tracking-wide relative -top-3">{data.websiteLink}</span>
                                    <div className="w-10 h-10 bg-[#3b82f6] rounded-full flex items-center justify-center text-white">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // 4. Elegant Side Layout
            if (layoutType === 'side') {
                return (
                    <div id={id} className="export-container text-white font-['Cairo'] relative overflow-hidden flex flex-row" style={{ ...activeTemplate.style }}>
                        <BackgroundLayer />

                        {/* Sidebar (Right) */}
                        <div className="w-1/3 h-full relative z-10 border-l border-white/10 bg-black/20 flex flex-col items-center justify-between p-12 text-center backdrop-blur-md">
                            <div className="flex flex-col items-center">
                                {logoImage ? (
                                    <img src={logoImage} style={{ width: `${logoSize}px`, height: `${logoSize}px` }} className="rounded-full shadow-2xl border mb-6" alt="Logo" />
                                ) : (
                                    <div className="w-24 h-24 rounded-full flex items-center justify-center text-4xl shadow-2xl border bg-white/5 mb-6">24</div>
                                )}
                                <h1 className="text-3xl font-bold mb-2" style={{ color: platformNameColor }}>{data.platformName}</h1>

                                <div className="w-10 h-1 bg-white/20 rounded-full my-8"></div>

                                <div className="py-4 px-8 rounded-lg border border-white/10 bg-white/5 mb-6" style={{ borderColor: activePrimary }}>
                                    <div className="text-white/60 text-sm font-bold mb-1">ÿßŸÑÿ™ÿßÿ±ŸäÿÆ</div>
                                    <div className="text-2xl font-sans font-bold" style={{ color: dateTextColor }}>{dateStr}</div>
                                </div>
                                <div className="py-2 px-6 rounded-full text-xl font-bold border" style={{ borderColor: activePrimary, color: badgeTextColor || activePrimary, background: `${badgeBgColor || activePrimary}20` }}>
                                    {badgeText || config.badge}
                                </div>
                            </div>

                            <div className="flex flex-col items-center gap-2 opacity-70">
                                <div className="w-10 h-10 rounded-full bg-[#3b82f6] text-white flex items-center justify-center mb-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
                                </div>
                                <span className="text-xl font-bold font-sans tracking-wide relative -top-2">{data.websiteLink}</span>
                            </div>
                        </div>

                        {/* Main Content (Left) */}
                        <div className="w-2/3 h-full relative z-10 p-16 flex flex-col justify-center">
                            <h2 className="font-serif font-black leading-tight mb-10 drop-shadow-sm" style={{ lineHeight: 1.3, color: titleColor, fontSize: `${titleFontSize}px` }}>
                                {data.title}
                            </h2>
                            <p className="font-medium leading-loose text-justify text-xl pl-8 border-r-2 border-white/10" dir="rtl" style={{ color: newsBodyColor, fontSize: `${bodyFontSize}px` }}>
                                {data.body}
                            </p>
                        </div>
                    </div>
                );
            }

            // Fallback
            return null;
        };

        const App = () => {
            const [newsData, setNewsData] = useState({
                title: '',
                body: '',
                platformName: 'ÿßŸÑŸÑŸäÿ±ÿ© 24',
                websiteLink: 'www.lairanews.com'
            });
            const [theme, setTheme] = useState('general');
            const [bgPattern, setBgPattern] = useState('default');
            const [badgeText, setBadgeText] = useState('ÿÆÿ®ÿ± ÿπÿßŸÖ');
            const [bgImage, setBgImage] = useState(null);
            const [bgOpacity, setBgOpacity] = useState(0.3);
            const [titleColor, setTitleColor] = useState('');
            const [customThemeColor, setCustomThemeColor] = useState(null);
            const [logoImage, setLogoImage] = useState(null);
            const [logoSize, setLogoSize] = useState(125); // Default size set to 125px
            const [dateOpacity, setDateOpacity] = useState(0.10);
            const [badgeOpacity, setBadgeOpacity] = useState(0.13);
            const [websiteOpacity, setWebsiteOpacity] = useState(0.05);

            // New Color States
            const [newsBodyColor, setNewsBodyColor] = useState('#e5e7eb');
            const [platformNameColor, setPlatformNameColor] = useState('#ffffff');
            const [dateBgColor, setDateBgColor] = useState('#ffffff');
            const [dateTextColor, setDateTextColor] = useState('#ffffff');
            const [badgeBgColor, setBadgeBgColor] = useState(null);
            const [badgeTextColor, setBadgeTextColor] = useState(null);

            // Font Size States
            const [titleFontSize, setTitleFontSize] = useState(72);
            const [bodyFontSize, setBodyFontSize] = useState(36);

            const [loading, setLoading] = useState(false);

            // ÿßÿ≥ÿ™ÿÆŸÑÿßÿµ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ´ŸäŸÖ ÿßŸÑÿ≠ÿßŸÑŸä ŸÑŸÑÿπÿ±ÿ∂
            const currentThemeConfig = getThemeConfig(theme);
            const activePrimary = customThemeColor || currentThemeConfig.primary;
            const effectiveTitleColor = titleColor || activePrimary;

            const handleLogoUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setLogoImage(reader.result);
                    };
                    reader.readAsDataURL(file);
                }
            };

            const changeTheme = (newTheme) => {
                setTheme(newTheme);
                setCustomThemeColor(null);
                setBadgeText(getThemeConfig(newTheme).badge);
            };

            const handleImageUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setBgImage(reader.result);
                    };
                    reader.readAsDataURL(file);
                }
            };

            const handleDownload = async () => {
                const element = document.getElementById('export-card');
                if (!element) return;

                setLoading(true);
                // ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ± ŸÇŸÑŸäŸÑÿßŸã ŸÑŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿÆÿ∑Ÿàÿ∑
                await document.fonts.ready;

                try {
                    await new Promise(resolve => setTimeout(resolve, 300)); // ÿ™ÿ£ÿÆŸäÿ± ÿ®ÿ≥Ÿäÿ∑

                    const canvas = await html2canvas(element, {
                        scale: 2.5, // ÿØŸÇÿ© ŸÖŸÖÿ™ÿßÿ≤ÿ© ŸÖÿπ ÿ≠ÿ¨ŸÖ ŸÖŸÑŸÅ ŸÖÿπŸÇŸàŸÑ
                        useCORS: true,
                        allowTaint: true,
                        backgroundColor: null,
                        // ÿ•ÿπÿØÿßÿØÿßÿ™ ÿÆÿßÿµÿ© ŸÑÿ•ÿµŸÑÿßÿ≠ ÿßŸÑŸÜÿµ ÿßŸÑÿπÿ±ÿ®Ÿä
                        onclone: (clonedDoc) => {
                            const clonedElement = clonedDoc.getElementById('export-card');
                            clonedElement.style.display = 'flex';
                            clonedElement.style.direction = 'rtl';
                            // ÿ•ÿµŸÑÿßÿ≠ ÿ™ŸÇÿ∑ÿπ ÿßŸÑÿ£ÿ≠ÿ±ŸÅ ÿπÿ®ÿ± ÿ•ÿ¨ÿ®ÿßÿ± ÿÆÿµÿßÿ¶ÿµ ÿßŸÑÿÆÿ∑
                            const allElements = clonedElement.querySelectorAll('*');
                            allElements.forEach(el => {
                                el.style.fontFamily = "'Cairo', sans-serif";
                                el.style.letterSpacing = '0px';
                            });
                        }
                    });

                    const link = document.createElement('a');
                    link.download = `News-${Date.now()}.png`;
                    link.href = canvas.toDataURL('image/png', 1.0);
                    link.click();
                } catch (err) {
                    console.error("Error generating image:", err);
                    alert("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ™ŸÇŸÜŸäÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.");
                }
                setLoading(false);
            };

            return (
                <div className="min-h-screen relative p-4 md:p-8 flex flex-col items-center">
                    {/* Background Animation */}
                    <div className="mesh-bg">
                        <div className="mesh-blob blob-1"></div>
                        <div className="mesh-blob blob-2"></div>
                        <div className="mesh-blob blob-3"></div>
                    </div>

                    {/* Header */}
                    <div className="relative z-10 text-center mb-10">
                        <h1 className="text-4xl md:text-5xl font-black mb-2 text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400">
                            ÿµÿßŸÜÿπ ÿßŸÑÿ£ÿÆÿ®ÿßÿ±
                        </h1>
                        <p className="text-gray-400 text-sm font-bold tracking-widest">ŸÖÿ≠ÿ±ÿ± ŸÖÿ™ÿ∑Ÿàÿ± ŸÑŸàÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ™ŸàÿßÿµŸÑ</p>
                    </div>

                    <div className="w-full max-w-6xl flex flex-col lg:flex-row gap-8 relative z-10">

                        {/* 1. Editor Section */}
                        <div className="flex-1 glass-panel rounded-[2rem] p-6 md:p-8 h-fit">
                            <div className="flex items-center gap-3 mb-6 pb-4 border-b border-gray-700">
                                <h2 className="text-xl font-bold">ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿÆÿ®ÿ±</h2>
                            </div>

                            {/* Theme Selector */}
                            <div className="mb-6">
                                <div className="flex justify-between items-end mb-2">
                                    <label className="block text-xs font-bold text-gray-400">ŸÜŸàÿπ ÿßŸÑŸÇÿßŸÑÿ®</label>

                                    {/* Custom Theme Color Picker */}
                                    <div className="flex items-center gap-2 bg-slate-800 rounded-lg px-2 py-1 border border-slate-700">
                                        <span className="text-[10px] text-gray-400 font-bold">ŸÑŸàŸÜ ÿßŸÑŸÇÿßŸÑÿ®</span>
                                        <input
                                            type="color"
                                            value={activePrimary}
                                            onChange={(e) => setCustomThemeColor(e.target.value)}
                                            className="w-6 h-6 rounded bg-transparent border-none cursor-pointer"
                                            title="ÿ™ÿÆÿµŸäÿµ ŸÑŸàŸÜ ÿßŸÑŸÇÿßŸÑÿ®"
                                        />
                                        {customThemeColor && (
                                            <button onClick={() => setCustomThemeColor(null)} className="text-[10px] text-red-400 hover:text-red-300">ÿßÿ≥ÿ™ÿπÿßÿØÿ©</button>
                                        )}
                                    </div>
                                </div>

                                <div className="grid grid-cols-3 gap-2 mb-2">
                                    <button onClick={() => changeTheme('general')} className={`p-3 rounded-xl font-bold text-sm transition-all border ${theme === 'general' ? 'bg-blue-600 text-white border-blue-400' : 'bg-slate-800 border-slate-700 text-gray-400 hover:bg-slate-700'}`}>ÿπÿßŸÖ</button>
                                    <button onClick={() => changeTheme('urgent')} className={`p-3 rounded-xl font-bold text-sm transition-all border ${theme === 'urgent' ? 'bg-red-600 text-white border-red-400' : 'bg-slate-800 border-slate-700 text-gray-400 hover:bg-slate-700'}`}>ÿπÿßÿ¨ŸÑ üö®</button>
                                    <button onClick={() => changeTheme('economy')} className={`p-3 rounded-xl font-bold text-sm transition-all border ${theme === 'economy' ? 'bg-green-600 text-white border-green-400' : 'bg-slate-800 border-slate-700 text-gray-400 hover:bg-slate-700'}`}>ÿßŸÇÿ™ÿµÿßÿØ üìà</button>
                                </div>
                                <div className="grid grid-cols-2 gap-2 mb-4">
                                    <button onClick={() => changeTheme('special')} className={`p-3 rounded-xl font-bold text-sm transition-all border ${theme === 'special' ? 'bg-purple-600 text-white border-purple-400' : 'bg-slate-800 border-slate-700 text-gray-400 hover:bg-slate-700'}`}>ŸÖŸÖŸäÿ≤ ‚ú®</button>
                                    <button onClick={() => changeTheme('highlight')} className={`p-3 rounded-xl font-bold text-sm transition-all border ${theme === 'highlight' ? 'bg-yellow-600 text-white border-yellow-400' : 'bg-slate-800 border-slate-700 text-gray-400 hover:bg-slate-700'}`}>ÿ•ÿ∂ÿßÿ°ÿ© üí°</button>
                                </div>

                                {/* Custom Badge Text */}
                                <div>
                                    <label className="block text-xs font-bold text-gray-400 mb-2">ŸÜÿµ ÿßŸÑÿ¥ÿßÿ±ÿ©</label>
                                    <input
                                        type="text"
                                        value={badgeText}
                                        onChange={(e) => setBadgeText(e.target.value)}
                                        placeholder="ÿ™ÿÆÿµŸäÿµ ŸÜÿµ ÿßŸÑÿ¥ÿßÿ±ÿ©..."
                                        className="w-full input-glass rounded-xl p-3 text-sm font-bold text-white outline-none placeholder-gray-500"
                                    />
                                </div>
                            </div>

                            <div className="mb-6">
                                <label className="block text-xs font-bold text-gray-400 mb-2">ŸÜŸàÿπ ÿßŸÑÿ™ÿµŸÖŸäŸÖ (Layout)</label>
                                <div className="grid grid-cols-4 gap-2">
                                    {designTemplates.map(pattern => (
                                        <button
                                            key={pattern.id}
                                            onClick={() => setBgPattern(pattern.id)}
                                            className={`h-16 rounded-lg border-2 transition-all relative overflow-hidden group flex flex-col items-center justify-end p-1 ${bgPattern === pattern.id ? 'border-blue-500 scale-105 shadow-lg shadow-blue-500/20' : 'border-slate-700 hover:border-slate-500'}`}
                                            title={pattern.name}
                                        >
                                            <div className="absolute inset-0 z-0" style={pattern.style}></div>

                                            {/* Mini Preview of Layout Type */}
                                            <div className="absolute inset-2 z-10 border border-white/20 rounded opacity-50 flex flex-col p-1">
                                                {pattern.type === 'modern' && <div className="w-full h-1 bg-white/40 mb-1 mx-auto rounded-full"></div>}
                                                {pattern.type === 'side' && <div className="w-1 h-full bg-white/40 absolute right-1 top-0"></div>}
                                                <div className="w-2/3 h-1 bg-white/20 mb-1 rounded-full"></div>
                                                <div className="w-full h-2 bg-white/10 rounded"></div>
                                            </div>

                                            <span className="relative z-20 text-[8px] font-bold text-white drop-shadow-md bg-black/40 px-1 rounded">{pattern.name}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>

                            {/* Background Image Controls */}
                            <div className="mb-6 border-b border-gray-700 pb-6">
                                <label className="block text-xs font-bold text-gray-400 mb-2">ÿµŸàÿ±ÿ© ÿßŸÑÿÆŸÑŸÅŸäÿ©</label>
                                <div className="flex flex-col gap-3">
                                    <div className="relative">
                                        <input
                                            type="file"
                                            accept="image/*"
                                            onChange={handleImageUpload}
                                            className="hidden"
                                            id="bg-upload"
                                        />
                                        <label htmlFor="bg-upload" className="w-full flex items-center justify-center gap-2 p-3 rounded-xl bg-slate-800 border border-slate-700 text-gray-300 hover:bg-slate-700 cursor-pointer transition-all font-bold text-sm">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
                                            {bgImage ? 'ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿµŸàÿ±ÿ©' : 'ÿ±ŸÅÿπ ÿµŸàÿ±ÿ©'}
                                        </label>
                                    </div>

                                    {bgImage && (
                                        <div className="flex flex-col gap-2">
                                            <div className="flex justify-between text-xs font-bold text-gray-400">
                                                <span>ÿ¥ŸÅÿßŸÅŸäÿ© ÿßŸÑÿÆŸÑŸÅŸäÿ©</span>
                                                <span>{Math.round(bgOpacity * 100)}%</span>
                                            </div>
                                            <input
                                                type="range"
                                                min="0"
                                                max="1"
                                                step="0.05"
                                                value={bgOpacity}
                                                onChange={(e) => setBgOpacity(parseFloat(e.target.value))}
                                                className="w-full accent-blue-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                            />
                                            <button onClick={() => setBgImage(null)} className="text-xs text-red-400 font-bold self-end hover:text-red-300">ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑÿµŸàÿ±ÿ©</button>
                                        </div>
                                    )}
                                </div>
                            </div>

                            {/* Platform Name and Logo */}
                            <div className="mb-6">
                                <div className="flex justify-between items-end mb-2">
                                    <div className="flex items-center gap-2">
                                        <label className="block text-xs font-bold text-gray-400">ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿµÿ© ŸàÿßŸÑÿ¥ÿπÿßÿ±</label>
                                        <input
                                            type="color"
                                            value={platformNameColor}
                                            onChange={(e) => setPlatformNameColor(e.target.value)}
                                            className="w-4 h-4 rounded bg-transparent border-none cursor-pointer"
                                            title="ŸÑŸàŸÜ ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿµÿ©"
                                        />
                                    </div>
                                    <div className="relative">
                                        <input
                                            type="file"
                                            accept="image/*"
                                            onChange={handleLogoUpload}
                                            className="hidden"
                                            id="logo-upload"
                                        />
                                        <label htmlFor="logo-upload" className="flex items-center gap-2 bg-slate-800 hover:bg-slate-700 px-3 py-1.5 rounded-lg cursor-pointer transition-all border border-slate-700">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-gray-400"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                                            <span className="text-[10px] text-gray-300 font-bold">{logoImage ? 'ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿ¥ÿπÿßÿ±' : 'ÿ±ŸÅÿπ ÿ¥ÿπÿßÿ±'}</span>
                                        </label>
                                    </div>
                                </div>
                                {logoImage && (
                                    <div className="mb-2 flex flex-col gap-2 bg-slate-800/50 p-3 rounded-xl border border-slate-700/50">
                                        <div className="flex justify-between text-xs font-bold text-gray-400">
                                            <span>ÿ≠ÿ¨ŸÖ ÿßŸÑÿ¥ÿπÿßÿ±</span>
                                            <span>{logoSize}px</span>
                                        </div>
                                        <input
                                            type="range"
                                            min="50"
                                            max="200"
                                            value={logoSize}
                                            onChange={(e) => setLogoSize(parseInt(e.target.value))}
                                            className="w-full accent-blue-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                        />
                                    </div>
                                )}
                                <input
                                    type="text"
                                    value={newsData.platformName}
                                    onChange={(e) => setNewsData({ ...newsData, platformName: e.target.value })}
                                    placeholder="ÿßŸÑŸÑŸäÿ±ÿ© 24"
                                    className="w-full input-glass rounded-xl p-4 text-lg font-bold text-white outline-none placeholder-gray-500"
                                />
                            </div>

                            {/* Website Link Input */}
                            <div className="mb-6">
                                <label className="block text-xs font-bold text-gray-400 mb-2">ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÖŸàŸÇÿπ (Ÿäÿ∏Ÿáÿ± ÿ£ÿ≥ŸÅŸÑ ÿßŸÑÿ®ÿ∑ÿßŸÇÿ©)</label>
                                <input
                                    type="text"
                                    value={newsData.websiteLink}
                                    onChange={(e) => setNewsData({ ...newsData, websiteLink: e.target.value })}
                                    placeholder="www.lairanews.com"
                                    className="w-full input-glass rounded-xl p-4 text-lg font-bold text-white outline-none placeholder-gray-500 font-sans"
                                    dir="ltr"
                                />
                            </div>

                            {/* Transparency and Colors Controls */}
                            <div className="mb-6 p-4 rounded-xl bg-slate-800/30 border border-white/5">
                                <h3 className="text-xs font-bold text-gray-400 mb-4">ÿ™ÿÆÿµŸäÿµ ÿßŸÑÿ£ŸÑŸàÿßŸÜ ŸàÿßŸÑÿ¥ŸÅÿßŸÅŸäÿ©</h3>

                                <div className="space-y-4">
                                    {/* Date Settings */}
                                    <div>
                                        <div className="flex justify-between items-center text-xs font-bold text-gray-400 mb-2">
                                            <span>ÿ®ÿ∑ÿßŸÇÿ© ÿßŸÑÿ™ÿßÿ±ŸäÿÆ</span>
                                            <div className="flex gap-2">
                                                <div className="flex items-center gap-1 bg-slate-800 px-2 py-1 rounded">
                                                    <span className="text-[10px]">ÿÆŸÑŸÅŸäÿ©</span>
                                                    <input type="color" value={dateBgColor} onChange={(e) => setDateBgColor(e.target.value)} className="w-4 h-4 rounded cursor-pointer" />
                                                </div>
                                                <div className="flex items-center gap-1 bg-slate-800 px-2 py-1 rounded">
                                                    <span className="text-[10px]">ŸÜÿµ</span>
                                                    <input type="color" value={dateTextColor} onChange={(e) => setDateTextColor(e.target.value)} className="w-4 h-4 rounded cursor-pointer" />
                                                </div>
                                                <span>{Math.round(dateOpacity * 100)}%</span>
                                            </div>
                                        </div>
                                        <input
                                            type="range"
                                            min="0"
                                            max="1"
                                            step="0.05"
                                            value={dateOpacity}
                                            onChange={(e) => setDateOpacity(parseFloat(e.target.value))}
                                            className="w-full accent-blue-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                        />
                                    </div>

                                    {/* Badge Settings */}
                                    <div>
                                        <div className="flex justify-between items-center text-xs font-bold text-gray-400 mb-2">
                                            <span>ÿ®ÿ∑ÿßŸÇÿ© ÿßŸÑŸÇÿßŸÑÿ® (ÿπÿßÿ¨ŸÑ..)</span>
                                            <div className="flex gap-2">
                                                <div className="flex items-center gap-1 bg-slate-800 px-2 py-1 rounded">
                                                    <span className="text-[10px]">ÿÆŸÑŸÅŸäÿ©</span>
                                                    <input type="color" value={badgeBgColor || activePrimary} onChange={(e) => setBadgeBgColor(e.target.value)} className="w-4 h-4 rounded cursor-pointer" />
                                                </div>
                                                <div className="flex items-center gap-1 bg-slate-800 px-2 py-1 rounded">
                                                    <span className="text-[10px]">ŸÜÿµ</span>
                                                    <input type="color" value={badgeTextColor || activePrimary} onChange={(e) => setBadgeTextColor(e.target.value)} className="w-4 h-4 rounded cursor-pointer" />
                                                </div>
                                                {/* Reset Button if customized */}
                                                {(badgeBgColor || badgeTextColor) && (
                                                    <button onClick={() => { setBadgeBgColor(null); setBadgeTextColor(null); }} className="text-[10px] text-red-400">ÿßÿ≥ÿ™ÿπÿßÿØÿ©</button>
                                                )}
                                                <span>{Math.round(badgeOpacity * 100)}%</span>
                                            </div>
                                        </div>
                                        <input
                                            type="range"
                                            min="0"
                                            max="1"
                                            step="0.05"
                                            value={badgeOpacity}
                                            onChange={(e) => setBadgeOpacity(parseFloat(e.target.value))}
                                            className="w-full accent-blue-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                        />
                                    </div>

                                    {/* Website Opacity */}
                                    <div>
                                        <div className="flex justify-between text-xs font-bold text-gray-400 mb-1">
                                            <span>ÿ£ŸäŸÇŸàŸÜÿ© ÿßŸÑŸÖŸàŸÇÿπ</span>
                                            <span>{Math.round(websiteOpacity * 100)}%</span>
                                        </div>
                                        <input
                                            type="range"
                                            min="0"
                                            max="1"
                                            step="0.05"
                                            value={websiteOpacity}
                                            onChange={(e) => setWebsiteOpacity(parseFloat(e.target.value))}
                                            className="w-full accent-blue-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                        />
                                    </div>
                                </div>
                            </div>

                            {/* Title Input */}
                            <div className="mb-6">
                                <div className="flex justify-between items-end mb-2">
                                    <label className="block text-xs font-bold text-gray-400">ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä</label>
                                    <div className="flex items-center gap-2 bg-slate-800 rounded-lg px-2 py-1 border border-slate-700">
                                        <span className="text-[10px] text-gray-400 font-bold">ÿ≠ÿ¨ŸÖ ÿßŸÑÿÆÿ∑</span>
                                        <input
                                            type="number"
                                            min="20"
                                            max="150"
                                            value={titleFontSize}
                                            onChange={(e) => setTitleFontSize(parseInt(e.target.value))}
                                            className="w-10 bg-transparent text-white text-[10px] font-bold outline-none text-center"
                                        />
                                    </div>
                                    <div className="flex items-center gap-2 bg-slate-800 rounded-lg px-2 py-1 border border-slate-700">
                                        <span className="text-[10px] text-gray-400 font-bold">ŸÑŸàŸÜ ÿßŸÑÿÆÿ∑</span>
                                        <input
                                            type="color"
                                            value={effectiveTitleColor}
                                            onChange={(e) => setTitleColor(e.target.value)}
                                            className="w-6 h-6 rounded bg-transparent border-none cursor-pointer"
                                            title="ÿßÿÆÿ™ÿ± ŸÑŸàŸÜ ÿßŸÑÿπŸÜŸàÿßŸÜ"
                                        />
                                        {titleColor && (
                                            <button onClick={() => setTitleColor('')} className="text-[10px] text-red-400 hover:text-red-300">ÿßÿ≥ÿ™ÿπÿßÿØÿ©</button>
                                        )}
                                    </div>
                                </div>
                                <input
                                    type="text"
                                    value={newsData.title}
                                    onChange={(e) => setNewsData({ ...newsData, title: e.target.value })}
                                    placeholder="ŸÖÿ´ÿßŸÑ: ÿßÿ±ÿ™ŸÅÿßÿπ ŸÖŸÅÿßÿ¨ÿ¶ ŸÅŸä ÿßŸÑÿ£ÿ≥ŸàÿßŸÇ..."
                                    className="w-full input-glass rounded-xl p-4 text-lg font-bold text-white outline-none placeholder-gray-500"
                                />
                            </div>

                            {/* Body Input */}
                            <div className="mb-8">
                                <div className="flex justify-between items-end mb-2">
                                    <label className="block text-xs font-bold text-gray-400">ŸÜÿµ ÿßŸÑÿÆÿ®ÿ±</label>
                                    <div className="flex items-center gap-2 bg-slate-800 rounded-lg px-2 py-1 border border-slate-700">
                                        <span className="text-[10px] text-gray-400 font-bold">ÿ≠ÿ¨ŸÖ ÿßŸÑÿÆÿ∑</span>
                                        <input
                                            type="number"
                                            min="10"
                                            max="100"
                                            value={bodyFontSize}
                                            onChange={(e) => setBodyFontSize(parseInt(e.target.value))}
                                            className="w-10 bg-transparent text-white text-[10px] font-bold outline-none text-center"
                                        />
                                    </div>
                                    <div className="flex items-center gap-2 bg-slate-800 rounded-lg px-2 py-1 border border-slate-700">
                                        <span className="text-[10px] text-gray-400 font-bold">ŸÑŸàŸÜ ÿßŸÑŸÜÿµ</span>
                                        <input
                                            type="color"
                                            value={newsBodyColor}
                                            onChange={(e) => setNewsBodyColor(e.target.value)}
                                            className="w-4 h-4 rounded bg-transparent border-none cursor-pointer"
                                            title="ŸÑŸàŸÜ ŸÜÿµ ÿßŸÑÿÆÿ®ÿ±"
                                        />
                                    </div>
                                </div>
                                <textarea
                                    value={newsData.body}
                                    onChange={(e) => setNewsData({ ...newsData, body: e.target.value })}
                                    placeholder="ÿßŸÉÿ™ÿ® ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ŸáŸÜÿß..."
                                    className="w-full input-glass rounded-xl p-4 text-base leading-relaxed text-gray-200 outline-none h-40 resize-none placeholder-gray-500"
                                ></textarea>
                            </div>

                            {/* Action Button */}
                            <button
                                onClick={handleDownload}
                                disabled={loading || !newsData.title}
                                className="w-full py-4 rounded-xl font-black text-lg flex items-center justify-center gap-2 transition-all transform active:scale-95 shadow-lg text-white"
                                style={{ background: `linear-gradient(to right, ${activePrimary}, ${activePrimary}dd)` }}
                            >
                                {loading ? 'ÿ¨ÿßÿ±Ÿä ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©...' : 'ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸàÿ±ÿ© (HD)'}
                            </button>
                        </div>

                        {/* 2. Live Preview Section (Smaller Scale) */}
                        <div className="flex-1 flex flex-col gap-4">
                            <div className="glass-panel rounded-2xl p-4 mb-2 flex items-center justify-between">
                                <span className="font-bold text-sm text-gray-300">ŸÖÿπÿßŸäŸÜÿ© ÿ™ŸÇÿ±Ÿäÿ®Ÿäÿ©</span>
                            </div>

                            <div className="relative w-full aspect-square rounded-[2rem] overflow-hidden border border-white/10 shadow-2xl bg-[#0f172a] group">
                                <div className={`absolute inset-0 bg-gradient-to-br opacity-80 transition-colors duration-500 ${!customThemeColor ? currentThemeConfig.bgGradient : ''}`}
                                    style={{
                                        ...(customThemeColor ? { background: `linear-gradient(to bottom right, ${customThemeColor}66, #0f172a)` } : {}),
                                    }}></div>

                                {/* Background Pattern for Preview */}
                                <div className="absolute inset-0 -z-10 transition-all duration-300"
                                    style={designTemplates.find(p => p.id === bgPattern)?.style || { background: '#0f172a' }}>
                                </div>

                                {bgImage && (
                                    <div className="absolute inset-0 bg-cover bg-center grayscale mix-blend-overlay"
                                        style={{
                                            backgroundImage: `url(${bgImage})`,
                                            opacity: bgOpacity,
                                            filter: 'grayscale(100%) contrast(120%)'
                                        }}>
                                    </div>
                                )}

                                <div className="relative z-10 p-8 flex flex-col h-full overflow-y-auto">
                                    <div className="flex justify-between items-start mb-4">
                                        {logoImage ? (
                                            <img src={logoImage} style={{ width: `${logoSize * 0.5}px`, height: `${logoSize * 0.5}px` }} className="rounded-lg object-cover shadow-md border border-white/10" alt="Logo" />
                                        ) : (
                                            <div className="w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center font-bold">24</div>
                                        )}
                                        <div className="text-[10px] px-2 py-1 rounded-full font-sans" style={{ backgroundColor: `${dateBgColor}${Math.round(dateOpacity * 255).toString(16).padStart(2, '0')}`, color: dateTextColor }}>{getFormattedDate()}</div>
                                    </div>

                                    <div className="flex-1 flex flex-col justify-center">
                                        <span className="text-xs font-bold mb-2" style={{ color: badgeTextColor || activePrimary }}>
                                            {badgeText || currentThemeConfig.badge}
                                        </span>
                                        <h3 className="font-black mb-4 leading-tight" style={{ color: effectiveTitleColor, fontSize: `${titleFontSize * 0.35}px` }}>
                                            {newsData.title || "ÿßŸÑÿπŸÜŸàÿßŸÜ..."}
                                        </h3>
                                        <p className="leading-relaxed text-justify opacity-80" style={{ color: newsBodyColor, fontSize: `${bodyFontSize * 0.35}px` }}>
                                            {newsData.body || "ÿßŸÑŸÜÿµ..."}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {/* 3. Hidden Export Card */}
                    <NewsCardExport
                        id="export-card"
                        data={newsData}
                        theme={theme}
                        bgPattern={bgPattern}
                        bgImage={bgImage}
                        bgOpacity={bgOpacity}
                        titleColor={effectiveTitleColor}
                        customThemeColor={customThemeColor}
                        logoImage={logoImage}
                        logoSize={logoSize}
                        dateOpacity={dateOpacity}
                        badgeOpacity={badgeOpacity}
                        websiteOpacity={websiteOpacity}
                        newsBodyColor={newsBodyColor}
                        platformNameColor={platformNameColor}
                        dateBgColor={dateBgColor}
                        dateTextColor={dateTextColor}
                        badgeBgColor={badgeBgColor}
                        badgeTextColor={badgeTextColor}
                        badgeText={badgeText}
                        titleFontSize={titleFontSize}
                        bodyFontSize={bodyFontSize}
                    />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>
